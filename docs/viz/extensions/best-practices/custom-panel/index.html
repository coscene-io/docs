<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-viz/extensions/best-practices/custom-panel" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Custom Panel | coScene</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://docs.coscene.io/docs/viz/extensions/best-practices/custom-panel><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Custom Panel | coScene"><meta data-rh=true name=description content="By writing your own panel, you can have more flexible control over the panel's appearance and behavior to meet your specific needs."><meta data-rh=true property=og:description content="By writing your own panel, you can have more flexible control over the panel's appearance and behavior to meet your specific needs."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://docs.coscene.io/docs/viz/extensions/best-practices/custom-panel><link data-rh=true rel=alternate href=https://docs.coscene.io/docs/viz/extensions/best-practices/custom-panel hreflang=en><link data-rh=true rel=alternate href=https://docs.coscene.io/docs/viz/extensions/best-practices/custom-panel hreflang=x-default><link data-rh=true rel=preconnect href=https://1TFD6DKASB-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.coscene.io/docs/category/viz","name":"Visualization","position":1},{"@type":"ListItem","item":"https://docs.coscene.io/docs/category/extensions","name":"Extensions","position":2},{"@type":"ListItem","item":"https://docs.coscene.io/docs/category/extensions/best-practices","name":"Best Practices","position":3},{"@type":"ListItem","item":"https://docs.coscene.io/docs/viz/extensions/best-practices/custom-panel","name":"Custom Panel","position":4}]}</script><link rel=search type=application/opensearchdescription+xml title=coScene href=/opensearch.xml><script src=https://plausible.io/js/script.js defer data-domain=docs.coscene.io></script><link rel=stylesheet href=/assets/css/styles.483c138d.css><script src=/assets/js/runtime~main.f6413c14.js defer></script><script src=/assets/js/main.e128397e.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_g25w href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="coScene Logo" class="themedComponent__WE5 themedComponent--light_MHsR" width=135px><img src=/img/logo.svg alt="coScene Logo" class="themedComponent__WE5 themedComponent--dark_yTyE" width=135px></div><b class="navbar__title text--truncate">coScene</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/overview>Documentation</a><a class="navbar__item navbar__link" href=/changelog>Changelog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://www.coscene.io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Homepage<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><a href=https://github.com/coscene-io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><a href="https://petstore.swagger.io/?url=https://coscene-download.s3.us-east-1.amazonaws.com/openapi/openapi.yaml" target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">OpenAPI<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><div class="toggle_VIJD colorModeToggle_Hn9K"><button class="clean-btn toggleButton_p0W5 toggleButtonDisabled_tciZ" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon__1v9 lightToggleIcon_wgYa"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon__1v9 darkToggleIcon_bV7A"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon__1v9 systemToggleIcon_sqGY"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_J7yX><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_sdsn"><div class=docsWrapper_xaJ3><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_lsQp" type=button></button><div class=docRoot_x5Hu><aside class="theme-doc-sidebar-container docSidebarContainer_rjnI"><div class=sidebarViewport_U05_><div class=sidebar_K5Hn><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Fe0x"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/overview>Overview</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/get-started/quick-start>Getting Started</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/collaboration>Collaboration</a><button aria-label="Expand sidebar category 'Collaboration'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/category/viz>Visualization</a><button aria-label="Collapse sidebar category 'Visualization'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/about-viz>About Data Visualization</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/use-3d-viz>Quick Start: 3D Data Visualizations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/layout>Layout</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/category/panel>Panel</a><button aria-label="Expand sidebar category 'Panel'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/create-moment-viz>Moments</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/options>Visualization Options</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/frame-rate-optimization>Frame Rate Optimization Options</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/category/extensions>Extensions</a><button aria-label="Collapse sidebar category 'Extensions'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/extensions/introduction>Extensions Introduction</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/extensions/local-development>Local Development</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/category/extensions/best-practices>Best Practices</a><button aria-label="Collapse sidebar category 'Best Practices'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/extensions/best-practices/using-message-converters-to-display-3d-markers-in-3d-panel>Using Message Converters to Display 3D Markers in 3D Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/viz/extensions/best-practices/custom-panel>Custom Panel</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/category/extensions/guides>Guide</a><button aria-label="Expand sidebar category 'Guide'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/category/extensions/api>API References</a><button aria-label="Expand sidebar category 'API References'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/viz/message-schemas>Message Schema</a><button aria-label="Expand sidebar category 'Message Schema'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/device>Device Management</a><button aria-label="Expand sidebar category 'Device Management'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/workflow>Automation</a><button aria-label="Expand sidebar category 'Automation'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/sim-and-tests>Sim & Test</a><button aria-label="Expand sidebar category 'Sim & Test'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/developer>Developers</a><button aria-label="Expand sidebar category 'Developers'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/use-case>Use Cases</a><button aria-label="Expand sidebar category 'Use Cases'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/image>Docker Images</a><button aria-label="Expand sidebar category 'Docker Images'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/client>Desktop Apps</a><button aria-label="Expand sidebar category 'Desktop Apps'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/others/browser-support>Others</a></div></ul></nav></div></div></aside><main class=docMainContainer_Sxyb><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol__VMa"><div class=docItemContainer_VcjW><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_LW7d" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_roif><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/category/viz><span>Visualization</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/category/extensions><span>Extensions</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/category/extensions/best-practices><span>Best Practices</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Custom Panel</span></ul></nav><div class="tocCollapsible_BZu_ theme-doc-toc-mobile tocMobile_iTVf"><button type=button class="clean-btn tocCollapsibleButton_nXjH">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Custom Panel</h1></header>
<p>By writing your own panel, you can have more flexible control over the panel's appearance and behavior to meet your specific needs.</p>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=why-use-custom-panels>Why Use Custom Panels<a href=#why-use-custom-panels class=hash-link aria-label="Direct link to Why Use Custom Panels" title="Direct link to Why Use Custom Panels">​</a></h2>
<p>Custom panels are very useful when existing panels don't support your visualization needs. You have complete control over the panel's appearance and behavior to meet your specific requirements.</p>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=our-goal>Our Goal<a href=#our-goal class=hash-link aria-label="Direct link to Our Goal" title="Direct link to Our Goal">​</a></h2>
<p>We will create a custom panel that simulates the original message panel, using <a href=https://github.com/microlinkhq/react-json-view target=_blank rel="noopener noreferrer">react-json-view</a> to display the raw messages for the corresponding topic.</p>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=before-you-begin>Before You Begin<a href=#before-you-begin class=hash-link aria-label="Direct link to Before You Begin" title="Direct link to Before You Begin">​</a></h2>
<p>Before starting, you need to understand/install some basic concepts/environments:</p>
<ul>
<li>Basic robotics concepts</li>
<li>Basic usage of coScene visualization features</li>
<li><a href=https://www.typescriptlang.org/docs/handbook/basic-types.html target=_blank rel="noopener noreferrer">Basic JS/TS syntax</a></li>
<li><a href=https://react.dev/ target=_blank rel="noopener noreferrer">Basic React usage</a></li>
<li><a href=https://docs.npmjs.com/ target=_blank rel="noopener noreferrer">Basic usage of frontend package managers like npm</a></li>
<li><a href=https://nodejs.org/en/download/ target=_blank rel="noopener noreferrer">Node.js version 14 or higher installed on your current device</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=initialize-project>Initialize Project<a href=#initialize-project class=hash-link aria-label="Direct link to Initialize Project" title="Direct link to Initialize Project">​</a></h2>
<p>Create a project using <a href=https://github.com/coscene-io/create-coscene-extension target=_blank rel="noopener noreferrer">create-coscene-extension</a>:</p>
<div class="language-bash codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-bash codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token plain">npm init coscene-extension@latest custom-raw-message-panel</span><br></span></code></pre></div></div>
<p>This command will create a <code>custom-raw-message-panel</code> directory containing some template source code.</p>
<p>Then, we need to install some dependencies in our project:</p>
<ul>
<li><code>@microlink/react-json-view</code> is a React component for displaying JSON data</li>
<li><code>immer</code> is a JavaScript library for handling immutable state</li>
<li><code>lodash</code> is a well-known JavaScript utility library that provides many useful functions, including array operations, object operations, etc.</li>
</ul>
<div class="language-bash codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-bash codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token plain">npm install @microlink/react-json-view immer lodash</span><br></span></code></pre></div></div>
<p>Then we open the <code>package.json</code> file and modify the <code>displayName</code> and <code>description</code> fields to <code>custom raw message panel</code>. The modified <code>package.json</code> file should look like this:</p>
<div class="language-json codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-json codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token property" style=color:#5a9bcf>"name"</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"custom-raw-message-panel"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token property" style=color:#5a9bcf>"displayName"</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"custom raw message panel"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token property" style=color:#5a9bcf>"description"</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"custom raw message panel"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  ...</span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=write-custom-panel>Write Custom Panel<a href=#write-custom-panel class=hash-link aria-label="Direct link to Write Custom Panel" title="Direct link to Write Custom Panel">​</a></h2>
<p>Now open the <code>custom-raw-message-panel</code> folder in your chosen editor, then open the <code>src/index.ts</code> file. You'll see that the file already registers an example panel as <code>example-panel</code>. First, we need to change this example panel's name to <code>custom-raw-message-panel</code>. The modified <code>index.ts</code> file should look like this:</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> ExtensionContext </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'@coscene/extension'</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> initExamplePanel </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'./ExamplePanel'</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>activate</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">extensionContext</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> ExtensionContext</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>void</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  extensionContext</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>registerPanel</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    name</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'custom-raw-message-panel'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    initPanel</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> initExamplePanel</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<p>Then we open the <code>src/ExamplePanel.tsx</code> file. In the <code>src/ExamplePanel.tsx</code> file, you'll see a simple panel component. We need to first explain the code in this file, then modify it according to our needs. This file uses React's state management to track subscribed topics, messages, and their rendering state.</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>ExamplePanel</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> context </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> context</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> PanelExtensionContext </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token constant" style=color:#5a9bcf>JSX</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">Element </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">topics</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> setTopics</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token generic-function function" style=color:#79b6f2>useState</span><span class="token generic-function generic class-name operator" style=color:#d7deea>&lt;</span><span class="token generic-function generic class-name keyword" style=color:#c5a5c5>readonly</span><span class="token generic-function generic class-name" style=color:#FAC863> Topic</span><span class="token generic-function generic class-name punctuation" style=color:#8dc891>[</span><span class="token generic-function generic class-name punctuation" style=color:#8dc891>]</span><span class="token generic-function generic class-name" style=color:#FAC863> </span><span class="token generic-function generic class-name operator" style=color:#d7deea>|</span><span class="token generic-function generic class-name" style=color:#FAC863> </span><span class="token generic-function generic class-name keyword" style=color:#c5a5c5>undefined</span><span class="token generic-function generic class-name operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">messages</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> setMessages</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token generic-function function" style=color:#79b6f2>useState</span><span class="token generic-function generic class-name operator" style=color:#d7deea>&lt;</span><span class="token generic-function generic class-name keyword" style=color:#c5a5c5>readonly</span><span class="token generic-function generic class-name" style=color:#FAC863> MessageEvent</span><span class="token generic-function generic class-name operator" style=color:#d7deea>&lt;</span><span class="token generic-function generic class-name builtin" style=color:#D8DEE9>unknown</span><span class="token generic-function generic class-name operator" style=color:#d7deea>></span><span class="token generic-function generic class-name punctuation" style=color:#8dc891>[</span><span class="token generic-function generic class-name punctuation" style=color:#8dc891>]</span><span class="token generic-function generic class-name" style=color:#FAC863> </span><span class="token generic-function generic class-name operator" style=color:#d7deea>|</span><span class="token generic-function generic class-name" style=color:#FAC863> </span><span class="token generic-function generic class-name keyword" style=color:#c5a5c5>undefined</span><span class="token generic-function generic class-name operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">renderDone</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> setRenderDone</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> useState</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>void</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>|</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>undefined</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>In the example, when relevant updates are detected, the <code>onRender</code> event will run:</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token function" style=color:#79b6f2>useLayoutEffect</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function-variable function" style=color:#79b6f2>onRender</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> RenderState</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> done</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token function" style=color:#79b6f2>setRenderDone</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> done</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token function" style=color:#79b6f2>setTopics</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topics</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token function" style=color:#79b6f2>setMessages</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">currentFrame</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>The onRender function receives the latest panel state:</p>
<ul>
<li><code>done</code> is a callback function after the new rendering is complete. When rendering is complete, you need to call the <code>done</code> function to indicate that the panel has completed the previous rendering cycle</li>
<li><code>renderState.topics</code> is the latest topic list</li>
<li><code>renderState.currentFrame</code> contains new messages for subscribed topics</li>
</ul>
<p>Next, use the <code>context.watch</code> function to tell the context which states need to be monitored. When the state changes, it will trigger the <code>onRender</code> event. <code>context.watch</code> is used to monitor key values in <a href=/docs/viz/extensions/api/custom-panels/render-state><code>RenderState</code></a>. You can view all monitorable key values from <a href=/docs/viz/extensions/api/custom-panels/render-state><code>RenderState</code></a></p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function-variable function" style=color:#79b6f2>onRender</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> RenderState</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> done</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// ...</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token comment" style=color:#999999>// Tell the panel context we care about changes in the _topic_ field in RenderState</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>watch</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token string" style=color:#8dc891>'topics'</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token comment" style=color:#999999>// Tell the panel context we want to subscribe to messages in the current frame</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>watch</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token string" style=color:#8dc891>'currentFrame'</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Then we need to use the <code>context.subscribe</code> function to subscribe to the topic array. Messages from these topics will be populated into <code>renderState.currentFrame</code></p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>subscribe</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>'/some/topic'</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Finally, when the panel finishes rendering, we need to call the <code>renderDone</code> function to indicate that the panel has completed the previous rendering cycle</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token function" style=color:#79b6f2>useEffect</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  renderDone</span><span class="token operator" style=color:#d7deea>?.</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">renderDone</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>At the bottom of the function, we can see how to use all this logic to render a table of data source topics and schema names</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">div style</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> padding</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"1rem"</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">h2</span><span class="token operator" style=color:#d7deea>></span><span class="token plain">Welcome to your </span><span class="token keyword" style=color:#c5a5c5>new</span><span class="token plain"> </span><span class="token class-name" style=color:#FAC863>extension</span><span class="token plain"> panel</span><span class="token operator" style=color:#d7deea>!</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">h2</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token comment" style=color:#999999>/* ... */</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">topics </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>map</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">div key</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">name</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">name</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">div</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">div key</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">datatype</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">datatype</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">div</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token comment" style=color:#999999>/* ... */</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">div</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>According to our needs, in the settings we need to let users choose the topic to display, and let users choose the theme supported by <code>@microlink/react-json-view</code>, indentation, and whether to display data types.</p>
<p>So we need to first define the TypeScript types for settings: State, and the themes supported by <code>@microlink/react-json-view</code> <code>ThemeOptions</code>.</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token comment" style=color:#999999>// Themes supported by @microlink/react-json-view</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> ThemeOptions </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'apathy'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'apathy:inverted'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'ashes'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'bespin'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'brewer'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'bright:inverted'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'bright'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'chalk'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'codeschool'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'colors'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'eighties'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'embers'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'flat'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'google'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'grayscale'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'grayscale:inverted'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'greenscreen'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'harmonic'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'hopscotch'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'isotope'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'marrakesh'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'mocha'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'monokai'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'ocean'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'paraiso'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'pop'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'railscasts'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'rjv-default'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'shapeshifter'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'shapeshifter:inverted'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'solarized'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'summerfruit'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'summerfruit:inverted'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'threezerotwofour'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'tomorrow'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'tube'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token string" style=color:#8dc891>'twilight'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>map</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">key</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> key</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> key </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token comment" style=color:#999999>// This is the type we'll use when rendering the panel and persist to the layout.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>type</span><span class="token plain"> </span><span class="token class-name" style=color:#FAC863>State</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>string</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    topic</span><span class="token operator" style=color:#d7deea>?</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>string</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    visible</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>boolean</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  appearance</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    displayDataTypes</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>boolean</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    indentWidth</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>string</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    theme</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>string</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Then we need to use React's <code>useState</code> to manage the settings state and declare a function to update the settings state.</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> produce </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'immer'</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> set </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'lodash'</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token comment" style=color:#999999>// Build our panel state from the context's initialState, filling in any missing values.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> setState</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token generic-function function" style=color:#79b6f2>useState</span><span class="token generic-function generic class-name operator" style=color:#d7deea>&lt;</span><span class="token generic-function generic class-name" style=color:#FAC863>State</span><span class="token generic-function generic class-name operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> partialState </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">initialState </span><span class="token keyword" style=color:#c5a5c5>as</span><span class="token plain"> Partial</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">State</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> partialState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token operator" style=color:#d7deea>?.</span><span class="token plain">label </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Data'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      topic</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> partialState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token operator" style=color:#d7deea>?.</span><span class="token plain">topic </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'/pose'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      visible</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> partialState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token operator" style=color:#d7deea>?.</span><span class="token plain">visible </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token boolean" style=color:#ff8b50>true</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    appearance</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      displayDataTypes</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> partialState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token operator" style=color:#d7deea>?.</span><span class="token plain">displayDataTypes </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token boolean" style=color:#ff8b50>true</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      theme</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> partialState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token operator" style=color:#d7deea>?.</span><span class="token plain">theme </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'rjv-default'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      indentWidth</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> partialState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token operator" style=color:#d7deea>?.</span><span class="token plain">indentWidth </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'2'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token comment" style=color:#999999>// Update our state in response to edit operations from the settings panel.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> actionHandler </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>useCallback</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">action</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> SettingsTreeAction</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">action</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">action </span><span class="token operator" style=color:#d7deea>===</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'update'</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> path</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> value </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> action</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">payload</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token comment" style=color:#999999>// We combine immer and lodash to generate a new state object, so React can re-render the panel.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token comment" style=color:#999999>// Since our data node contains label and visibility properties, this combination can automatically handle label editing and node visibility toggling,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token comment" style=color:#999999>// without needing to write special handling logic.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token function" style=color:#79b6f2>setState</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token function" style=color:#79b6f2>produce</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">draft</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>set</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">draft</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> path</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> value</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token comment" style=color:#999999>// If the topic is changed, update our subscription.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">path</span><span class="token punctuation" style=color:#8dc891>[</span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>===</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'topic'</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>subscribe</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> topic</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> value </span><span class="token keyword" style=color:#c5a5c5>as</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>string</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Next, we use <code>context.updatePanelSettingsEditor</code> to register settings in our panel, and when the settings state changes, use <code>context.saveState</code> to save the state to the layout.</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token comment" style=color:#999999>// Update the settings editor each time our state or available topic list changes.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token function" style=color:#79b6f2>useEffect</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// Save current state to layout</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>saveState</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> topicOptions </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">topics </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>map</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> topic</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">name</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> topic</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">name </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// We set up the settings tree to mirror the shape of our panel state, so we can use paths from the settings tree to directly update our state.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>updatePanelSettingsEditor</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    actionHandler</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    nodes</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token comment" style=color:#999999>// Our label comes from the label in state, and will update to reflect changes in the state value.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">label</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token comment" style=color:#999999>// Setting this to true allows users to edit this node's label.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        renamable</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token boolean" style=color:#ff8b50>true</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token comment" style=color:#999999>// A non-undefined value here allows users to toggle this node's visibility.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        visible</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">visible</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        icon</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Cube'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        fields</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          topic</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Topic'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            input</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'select'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            options</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> topicOptions</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      appearance</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Appearance'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        icon</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Shapes'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        fields</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          theme</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Theme'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            input</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'select'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">theme</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            options</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> ThemeOptions</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          indentWidth</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Indent Width'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            input</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'select'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">indentWidth</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            options</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">              </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'2'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'2'</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">              </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'4'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'4'</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">              </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'8'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'8'</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            </span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          displayDataTypes</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            label</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'Display DataTypes'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            input</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>'boolean'</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">            value</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">displayDataTypes</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">          </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> actionHandler</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> topics</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Then we need to make two small changes:</p>
<ul>
<li>Check if <code>renderState.currentFrame</code> is undefined, if it is undefined, keep the data from the previous frame, don't clear the message.</li>
<li>Listen to the topic set in settings during initialization</li>
</ul>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token function" style=color:#79b6f2>useLayoutEffect</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function-variable function" style=color:#79b6f2>onRender</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> done</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token operator" style=color:#d7deea>...</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token comment" style=color:#999999>// If currentFrame is undefined, keep the data from the previous frame, don't clear the message.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">currentFrame</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token function" style=color:#79b6f2>setMessages</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">renderState</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">currentFrame</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// After adding the render handler, you must specify which fields in the render state (RenderState) will trigger updates.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// If you don't monitor any fields, the panel context will think you don't need any updates, so the panel won't render.</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// Tell the panel context we care about changes in the _topic_ field in RenderState</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>watch</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token string" style=color:#8dc891>"topics"</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// Tell the panel context we want to subscribe to messages in the current frame</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>watch</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token string" style=color:#8dc891>"currentFrame"</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token comment" style=color:#999999>// Subscribe to our initial topic</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    context</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token function" style=color:#79b6f2>subscribe</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> topic</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token plain">context</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Finally, just use <code>@microlink/react-json-view</code> to draw the corresponding messages in the <code>return</code>.</p>
<div class="language-ts codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-ts codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">div style</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> padding</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"1rem"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> display</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"flex"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> flexDirection</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"column"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> maxHeight</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"100%"</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">h2</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"Choose a topic in settings"</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">h2</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">div</span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      style</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        overflowY</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"auto"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        flex</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token plain">ReactJson</span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        src</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">messages </span><span class="token operator" style=color:#d7deea>??</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        displayDataTypes</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">displayDataTypes</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        theme</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">theme </span><span class="token keyword" style=color:#c5a5c5>as</span><span class="token plain"> ThemeKeys</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">        indentWidth</span><span class="token operator" style=color:#d7deea>=</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token function" style=color:#79b6f2>Number</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">appearance</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">indentWidth</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">      </span><span class="token operator" style=color:#d7deea>/</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">div</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token operator" style=color:#d7deea>/</span><span class="token plain">div</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<blockquote>
<p>You can find the complete code <a href=https://github.com/coscene-io/create-coscene-extension/tree/main/examples/panel-settings target=_blank rel="noopener noreferrer">here</a></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=test-plugin>Test Plugin<a href=#test-plugin class=hash-link aria-label="Direct link to Test Plugin" title="Direct link to Test Plugin">​</a></h2>
<p>To build and install the plugin for local testing in coStudio, run the following command in the plugin directory:</p>
<div class="language-bash codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-bash codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token plain">npm run local-install</span><br></span></code></pre></div></div>
<p>In coStudio, open the plugin list on the right side, and you'll now see <code>custom raw message panel</code> in the list of installed plugins:
<img decoding=async loading=lazy alt=extensionList src=/assets/images/customRawMessageExtensionList-7df5adadb1fe059d2169d29accaa3bb9.png width=804 height=1638 class=img_PeDu></p>
<p>The panel list will also have a new <code>custom-raw-message-panel</code> panel. Add our panel and open any file, and you can use our custom <code>custom-raw-message-panel</code> panel:
<img decoding=async loading=lazy alt=customRawMessagePanel src=/assets/images/customRawMessagePanelList-9488a5d74ed4de7466ed4a071a6c0e2c.png width=2856 height=1734 class=img_PeDu></p>
<p>You can choose the topic you want to view in the settings and customize the panel's appearance to view messages for the corresponding topic in the panel:
<img decoding=async loading=lazy alt=customRawMessagePanel src=/assets/images/customRawMessagePanel-287de6927c8a46b0c3188cda8aa37edd.png width=2860 height=1740 class=img_PeDu></p>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=share-your-plugin>Share Your Plugin<a href=#share-your-plugin class=hash-link aria-label="Direct link to Share Your Plugin" title="Direct link to Share Your Plugin">​</a></h2>
<p>To share your plugin with others, you need to package it as a .coe file. To do this, run the following command in the plugin directory:</p>
<div class="language-bash codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-bash codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token plain">npm run package</span><br></span></code></pre></div></div>
<p>You'll find an <code>unknown.custom-raw-message-panel-0.0.0.coe</code> file in the plugin directory. You can distribute this to others, and they can install it in their coStudio instance by dragging and dropping it.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_lYeq"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-08-19T12:16:10.000Z itemprop=dateModified>Aug 19, 2025</time></b> by <b>Qi He</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/viz/extensions/best-practices/using-message-converters-to-display-3d-markers-in-3d-panel><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Using Message Converters to Display 3D Markers in 3D Panel</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/category/extensions/guides><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>指南</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IwWT thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#why-use-custom-panels class="table-of-contents__link toc-highlight">Why Use Custom Panels</a><li><a href=#our-goal class="table-of-contents__link toc-highlight">Our Goal</a><li><a href=#before-you-begin class="table-of-contents__link toc-highlight">Before You Begin</a><li><a href=#initialize-project class="table-of-contents__link toc-highlight">Initialize Project</a><li><a href=#write-custom-panel class="table-of-contents__link toc-highlight">Write Custom Panel</a><li><a href=#test-plugin class="table-of-contents__link toc-highlight">Test Plugin</a><li><a href=#share-your-plugin class="table-of-contents__link toc-highlight">Share Your Plugin</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Legel</div><ul class="footer__items clean-list"><li class=footer__item><a href=/legal/privacy class=footer__link-item target=_blank>Privacy Policy</a><li class=footer__item><a href=/legal/terms class=footer__link-item target=_blank>Terms of Service</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Data Security</div><ul class="footer__items clean-list"><li class=footer__item><a href=/security/security-white-paper class=footer__link-item target=_blank>coScene Data Security White Paper</a><li class=footer__item><a href=/security/data-security-solution class=footer__link-item target=_blank>coScene Data Security Solution</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/coscene-io target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.coscene.io target=_blank rel="noopener noreferrer" class=footer__link-item>Homepage<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2023 coScene</div></div></div></footer></div>