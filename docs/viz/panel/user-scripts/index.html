<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-viz/panel/user-scripts" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>User Scripts panel | coScene</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:url content=https://docs.coscene.io/docs/viz/panel/user-scripts><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="User Scripts panel | coScene"><meta data-rh=true name=description content="User scripts are custom in-app scripts (written in TypeScript) that transform messages. A user script can transform both playback and range-loaded. The result is output to a new topic."><meta data-rh=true property=og:description content="User scripts are custom in-app scripts (written in TypeScript) that transform messages. A user script can transform both playback and range-loaded. The result is output to a new topic."><link data-rh=true rel=icon href=/img/favicon.ico><link data-rh=true rel=canonical href=https://docs.coscene.io/docs/viz/panel/user-scripts><link data-rh=true rel=alternate href=https://docs.coscene.io/docs/viz/panel/user-scripts hreflang=en><link data-rh=true rel=alternate href=https://docs.coscene.io/docs/viz/panel/user-scripts hreflang=x-default><link data-rh=true rel=preconnect href=https://1TFD6DKASB-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.coscene.io/docs/category/viz","name":"Visualization","position":1},{"@type":"ListItem","item":"https://docs.coscene.io/docs/category/panel","name":"Panel","position":2},{"@type":"ListItem","item":"https://docs.coscene.io/docs/viz/panel/user-scripts","name":"User Scripts panel","position":3}]}</script><link rel=search type=application/opensearchdescription+xml title=coScene href=/opensearch.xml><script src=https://plausible.io/js/script.js defer data-domain=docs.coscene.io></script><link rel=stylesheet href=/assets/css/styles.483c138d.css><script src=/assets/js/runtime~main.0fb96c37.js defer></script><script src=/assets/js/main.0811b2df.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/img/logo.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_g25w href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/logo.svg alt="coScene Logo" class="themedComponent__WE5 themedComponent--light_MHsR" width=135px><img src=/img/logo.svg alt="coScene Logo" class="themedComponent__WE5 themedComponent--dark_yTyE" width=135px></div><b class="navbar__title text--truncate">coScene</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/overview>Documentation</a><a class="navbar__item navbar__link" href=/changelog>Changelog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://www.coscene.io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Homepage<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><a href=https://github.com/coscene-io target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><a href="https://petstore.swagger.io/?url=https://coscene-download.s3.us-east-1.amazonaws.com/openapi/openapi.yaml" target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">OpenAPI<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><div class="toggle_VIJD colorModeToggle_Hn9K"><button class="clean-btn toggleButton_p0W5 toggleButtonDisabled_tciZ" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon__1v9 lightToggleIcon_wgYa"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon__1v9 darkToggleIcon_bV7A"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon__1v9 systemToggleIcon_sqGY"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_J7yX><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_sdsn"><div class=docsWrapper_xaJ3><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_lsQp" type=button></button><div class=docRoot_x5Hu><aside class="theme-doc-sidebar-container docSidebarContainer_rjnI"><div class=sidebarViewport_U05_><div class=sidebar_K5Hn><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_Fe0x"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/overview>Overview</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/get-started/quick-start>Getting Started</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/collaboration>Collaboration</a><button aria-label="Expand sidebar category 'Collaboration'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" href=/docs/category/viz>Visualization</a><button aria-label="Collapse sidebar category 'Visualization'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/about-viz>About Data Visualization</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/use-3d-viz>Quick Start: 3D Data Visualizations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/layout>Layout</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/category/panel>Panel</a><button aria-label="Collapse sidebar category 'Panel'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/panel-overview>Panel Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/3d-panel>3D Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/log-panel>Log Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/plot-panel>Plot Panel: Visualizing Data Trends</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/image-panel>Image Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/publish-panel>Publish Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/service-panel>Service Call Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/teleop-panel>Teleop Panel</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/panel/raw-messages>Raw Messages</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/viz/panel/user-scripts>User Scripts panel</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/create-moment-viz>Moments</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/options>Visualization Options</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/viz/frame-rate-optimization>Frame Rate Optimization Options</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/category/extensions>Extensions</a><button aria-label="Expand sidebar category 'Extensions'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" tabindex=0 href=/docs/viz/message-schemas>Message Schema</a><button aria-label="Expand sidebar category 'Message Schema'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/device>Device Management</a><button aria-label="Expand sidebar category 'Device Management'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/workflow>Automation</a><button aria-label="Expand sidebar category 'Automation'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/sim-and-tests>Sim & Test</a><button aria-label="Expand sidebar category 'Sim & Test'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/developer>Developers</a><button aria-label="Expand sidebar category 'Developers'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/use-case>Use Cases</a><button aria-label="Expand sidebar category 'Use Cases'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/image>Docker Images</a><button aria-label="Expand sidebar category 'Docker Images'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist" href=/docs/category/client>Desktop Apps</a><button aria-label="Expand sidebar category 'Desktop Apps'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/docs/others/browser-support>Others</a></div></ul></nav></div></div></aside><main class=docMainContainer_Sxyb><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol__VMa"><div class=docItemContainer_VcjW><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_LW7d" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_roif><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/category/viz><span>Visualization</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/category/panel><span>Panel</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>User Scripts panel</span></ul></nav><div class="tocCollapsible_BZu_ theme-doc-toc-mobile tocMobile_iTVf"><button type=button class="clean-btn tocCollapsibleButton_nXjH">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>User Scripts panel</h1></header>
<p>User scripts are custom in-app scripts (written in TypeScript) that transform messages. A user script can transform both playback and range-loaded. The result is output to a new topic.</p>
<ul>
<li>Playback data – Messages streaming frame-by-frame into Foxglove; e.g. data for the <a href=/docs/viz/panel/raw-messages>Raw Messages</a> or <a href=/docs/viz/panel/3d-panel>3D panel</a></li>
<li>Range-loaded data – Messages for the entire data range being played back; e.g. data for the <a href=/docs/viz/panel/plot-panel>Plot</a> or State Transitions panels</li>
</ul>
<p>When transforming range-loaded data, Foxglove creates two instances of the running user script – one handles the full data range, while the other handles just the current playback frame of messages. Each instance of the user script receives the messages in log time order.</p>
<blockquote>
<p><strong>Tip</strong></p>
<p>User scripts are local to a layout. Use a <a href=/docs/viz/extensions/introduction#message-converters>message converter</a> to transform messages in a way that will apply to all layouts.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=getting-started>Getting started<a href=#getting-started class=hash-link aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2>
<p>User Scripts are written in TypeScript.</p>
<blockquote>
<p><strong>Info</strong></p>
<p>TypeScript is a superset of JavaScript, so you can Google syntactic questions (e.g. how to manipulate arrays, or access object properties) using JavaScript terms, and semantic questions (e.g. how to make an object property optional) using TypeScript terms.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_DxZ9" id=writing-your-first-script>Writing your first script<a href=#writing-your-first-script class=hash-link aria-label="Direct link to Writing your first script" title="Direct link to Writing your first script">​</a></h3>
<p>Every script must declare 3 exports:</p>
<ul>
<li><code>inputs</code> – An array of input topics to transform</li>
<li><code>output</code> – Name of the transformed output topic</li>
<li><code>script</code> – A function that takes messages from input topics, transforms them, and then publishes messages on the output topic; must be the <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export#description target=_blank rel="noopener noreferrer">default export</a></li>
</ul>
<p>Here is a basic script that echoes its input on a new output topic, <code>/coscene_script/echo</code>:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> Message </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/coscene_script/echo"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Message</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"rosgraph_msgs/Log"</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> event</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">message</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<p>If you open a recording with a <code>/rosout</code> topic, you can now inspect the <code>/studio_script/echo</code> topic in the <a href=/docs/viz/panel/raw-messages>Raw Messages panel</a>.</p>
<p>When you create a new script, you’ll be presented with some boilerplate:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> Message </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>type</span><span class="token plain"> </span><span class="token class-name" style=color:#FAC863>Output</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> hello</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>string</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>"/input/topic"</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/studio_script/output_topic"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/input/topic"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Output </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> hello</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"world!"</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<p>You’ll notice a few things:</p>
<ul>
<li>The <code>Input</code> and <code>Message</code> types are imported from the <code>./types</code> module, which provides helper types for your Input events and messages</li>
<li>The <code>Output</code> type has some default properties that the <code>script</code> function's output must adhere to</li>
</ul>
<p><code>Input</code> is a generic type, meaning that it takes a parameter in order to be used. It is left empty on purpose as you'll need to populate it with the name of your input topic, e.g. <code>Input&lt;"/rosout"></code>.</p>
<blockquote>
<p><strong>Note</strong></p>
<p>The input event is read-only. Do not modify the event object.</p>
</blockquote>
<p>As for the <code>Output</code> type, you can either manually type out your output with the properties you care about (i.e. what is available in the boilerplate) or use one of the dynamically generated types from the <code>Message</code> type imported above. For instance, if you want to publish an array of markers, you can return the type <code>Message&lt;"visualization_msgs/MarkerArray"></code>.</p>
<p>It's not always obvious how message properties affect the visualized output – strictly typing your scripts helps you debug issues at compile time rather than at runtime. With that said, you can disable Typescript checks when working on a rough draft of your script by adding <code>// @ts-expect-error</code> on the line above the one you want to ignore.</p>
<h3 class="anchor anchorWithStickyNavbar_DxZ9" id=using-multiple-input-topics>Using multiple input topics<a href=#using-multiple-input-topics class=hash-link aria-label="Direct link to Using multiple input topics" title="Direct link to Using multiple input topics">​</a></h3>
<p>In some cases, you will want to define multiple input topics:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> Message </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/tf"</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/coscene_script/echo"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>|</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/tf"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic </span><span class="token operator" style=color:#d7deea>===</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token comment" style=color:#999999>// read event.message fields expected for /rosout messages</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token comment" style=color:#999999>// read event.message fields expected for /tf messages</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<p>This snippet uses union types to assert that the message in the <code>script</code> function can take either a <code>/rosout</code> or <code>/tf</code> topic. Use an if/else clause to differentiate between incoming topics' schema names when manipulating messages.</p>
<p>To combine messages from multiple topics, create a variable in your script's global scope to reference every time your <code>script</code> function is invoked. Check timestamps to make sure you are not publishing out-of-sync data.</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> Message</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> Time </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/tf"</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/coscene_script/echo"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>let</span><span class="token plain"> lastReceiveTime</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Time </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> sec</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>0</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> nsec</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>0</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> myScope</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> tf</span><span class="token operator" style=color:#d7deea>?</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Message</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"tf2_msgs/TFMessage"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"> rosout</span><span class="token operator" style=color:#d7deea>?</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Message</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"rosgraph_msgs/Log"</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token operator" style=color:#d7deea>></span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>|</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/tf"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>|</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>undefined</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> receiveTime </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> message</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>let</span><span class="token plain"> inSync </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token boolean" style=color:#ff8b50>true</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">receiveTime</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">sec </span><span class="token operator" style=color:#d7deea>!==</span><span class="token plain"> lastReceiveTime</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">sec </span><span class="token operator" style=color:#d7deea>||</span><span class="token plain"> receiveTime</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">nsec </span><span class="token operator" style=color:#d7deea>!==</span><span class="token plain"> lastReceiveTime</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">nsec</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    lastReceiveTime </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> receiveTime</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    inSync </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token boolean" style=color:#ff8b50>false</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">message</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">topic </span><span class="token operator" style=color:#d7deea>===</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/rosout"</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    myScope</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">rosout </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> event</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">message</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    myScope</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">tf </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> event</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">message</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token operator" style=color:#d7deea>!</span><span class="token plain">inSync</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_DxZ9" id=using-global-variables>Using global variables<a href=#using-global-variables class=hash-link aria-label="Direct link to Using global variables" title="Direct link to Using global variables">​</a></h3>
<p>The <code>script</code> function will receive all of the variables as an object every time it is called. Each time a new message is received, the <code>script</code> function will be re-run with the latest variable values:</p>
<blockquote>
<p><strong>Note</strong></p>
<p>Global variables are read-only on user-scripts. Do not modify the globalVars parameter.</p>
</blockquote>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> Message </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>type</span><span class="token plain"> </span><span class="token class-name" style=color:#FAC863>Output</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>type</span><span class="token plain"> </span><span class="token class-name" style=color:#FAC863>GlobalVariables</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> someNumericaVar</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/coscene_script/"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/foo_marker"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> globalVars</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> GlobalVariables</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Output </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">message</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">id </span><span class="token operator" style=color:#d7deea>===</span><span class="token plain"> globalVars</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">someNumericaVar</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token comment" style=color:#999999>// Message's id matches $someNumericaVar</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> data</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_DxZ9" id=debugging>Debugging<a href=#debugging class=hash-link aria-label="Direct link to Debugging" title="Direct link to Debugging">​</a></h3>
<p>User scripts are not executed unless the output topic is being used somewhere within your layout.</p>
<p>To debug your script, first add a Raw Messages panel subscribing to the output topic to your layout. From there, you can either inspect the incoming topic directly, or invoke <code>log(someValue)</code> throughout the user script to print values to the Logs section at the bottom of the panel.</p>
<p>The only value you cannot <code>log()</code> is one that is, or contains, a function definition. You can also log multiple values at once, e.g. <code>log(someValue, anotherValue, yetAnotherValue)</code>.</p>
<p>The following log statements will not produce any errors:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> addNums </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">a</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> b</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> a </span><span class="token operator" style=color:#d7deea>+</span><span class="token plain"> b</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token function" style=color:#79b6f2>log</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token number" style=color:#5a9bcf>50</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"ABC"</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>null</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>undefined</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> abc</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>2</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> def</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token boolean" style=color:#ff8b50>false</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token function" style=color:#79b6f2>log</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token number" style=color:#5a9bcf>1</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>+</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>2</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>addNums</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>2</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>But these containing function definitions will:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token function" style=color:#79b6f2>log</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token function" style=color:#79b6f2>log</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">addNums</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token function" style=color:#79b6f2>log</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> subtractNums</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">a</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"> b</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>=></span><span class="token plain"> a </span><span class="token operator" style=color:#d7deea>-</span><span class="token plain"> b </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token punctuation" style=color:#8dc891>;</span><br></span></code></pre></div></div>
<p>Invoking <code>log()</code> outside your <code>script</code> function will invoke it once, when your script is registered. Invoking <code>log()</code> inside your <code>script</code> function will log that value every time your <code>script</code> function is called.</p>
<blockquote>
<p><strong>Tip</strong></p>
<p>For topics publishing at a high rate, using <code>log()</code> can slow down the user script.</p>
<p>Because a Plot panel will invoke the user script across all messages in the rendered time-range, <code>log()</code> output is not shown when plotting the output of a user script. In this case, use a Raw Messages panel to view the output message instead.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_DxZ9" id=skipping-output>Skipping output<a href=#skipping-output class=hash-link aria-label="Direct link to Skipping output" title="Direct link to Skipping output">​</a></h3>
<p>Do an early (or late) <code>return</code> in your function body when you don't want to publish. For example, let's say you only wanted to publish messages when a constant in the input is not 3:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>"/state"</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/coscene_script/manual_metrics"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/state"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> metrics</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token builtin" style=color:#D8DEE9>number</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token operator" style=color:#d7deea>|</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>undefined</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">message</span><span class="token punctuation" style=color:#8dc891>.</span><span class="token plain">constant </span><span class="token operator" style=color:#d7deea>===</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>3</span><span class="token punctuation" style=color:#8dc891>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token comment" style=color:#999999>// Do not publish any message</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    </span><span class="token comment" style=color:#999999>// Your data here</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<p>In Typescript, if you return without a value, it will implicitly return <code>undefined</code>. Note the union return type for the <code>script</code> function – we've indicated to Typescript that this function can return <code>undefined</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_DxZ9" id=using-foxgloveschemas>Using @foxglove/schemas<a href=#using-foxgloveschemas class=hash-link aria-label="Direct link to Using @foxglove/schemas" title="Direct link to Using @foxglove/schemas">​</a></h3>
<p>Import and use types from the <a href=https://github.com/foxglove/foxglove-sdk target=_blank rel="noopener noreferrer">@foxglove/schemas</a> package in user scripts:</p>
<div class="language-typescript codeBlockContainer_BN1R theme-code-block" style=--prism-background-color:#282c34;--prism-color:#ffffff><div class=codeBlockContent_eUcn><pre tabindex=0 class="prism-code language-typescript codeBlock_jfK7 thin-scrollbar" style=background-color:#282c34;color:#ffffff><code class=codeBlockLines_Ty92><span class=token-line style=color:#ffffff><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Input </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"./types"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"> Color </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>from</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"@foxglove/schemas"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> inputs </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>[</span><span class="token string" style=color:#8dc891>"/imu"</span><span class="token punctuation" style=color:#8dc891>]</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>const</span><span class="token plain"> output </span><span class="token operator" style=color:#d7deea>=</span><span class="token plain"> </span><span class="token string" style=color:#8dc891>"/s_script/json_data"</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token keyword" style=color:#c5a5c5>export</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>default</span><span class="token plain"> </span><span class="token keyword" style=color:#c5a5c5>function</span><span class="token plain"> </span><span class="token function" style=color:#79b6f2>script</span><span class="token punctuation" style=color:#8dc891>(</span><span class="token plain">event</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Input</span><span class="token operator" style=color:#d7deea>&lt;</span><span class="token string" style=color:#8dc891>"/imu"</span><span class="token operator" style=color:#d7deea>></span><span class="token punctuation" style=color:#8dc891>)</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> Color </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token keyword" style=color:#c5a5c5>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#8dc891>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    r</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    g</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    b</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">    a</span><span class="token operator" style=color:#d7deea>:</span><span class="token plain"> </span><span class="token number" style=color:#5a9bcf>1</span><span class="token punctuation" style=color:#8dc891>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain">  </span><span class="token punctuation" style=color:#8dc891>}</span><span class="token punctuation" style=color:#8dc891>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#ffffff><span class="token plain"></span><span class="token punctuation" style=color:#8dc891>}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=utilities-and-templates>Utilities and templates<a href=#utilities-and-templates class=hash-link aria-label="Direct link to Utilities and templates" title="Direct link to Utilities and templates">​</a></h2>
<p>The sidebar's "Utilities" tab includes functions that can be imported for use in any script (e.g. <code>import { compare } from "./time.ts"</code>). The <code>types.ts</code> utility file is generated from the currently loaded data source, and contains type definitions for all found schemas.</p>
<p>We currently do not allow importing 3rd-party packages, but let us know if there are packages that would be useful to you!</p>
<p>The Templates tab includes boilerplate for writing common scripts, like one that publishes a <code>MarkerArray</code>. If you have any other use cases that would work well as a template, please let us know.</p>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=settings>Settings<a href=#settings class=hash-link aria-label="Direct link to Settings" title="Direct link to Settings">​</a></h2>
<table><thead><tr><th>General<th><tbody><tr><td>Auto-format on save<td>Auto-format the code in your script on save</table>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=controls-and-shortcuts>Controls and shortcuts<a href=#controls-and-shortcuts class=hash-link aria-label="Direct link to Controls and shortcuts" title="Direct link to Controls and shortcuts">​</a></h2>
<p>Press <code>Cmd</code> + <code>s</code> to save script changes.</p>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=typescript-resources>TypeScript Resources<a href=#typescript-resources class=hash-link aria-label="Direct link to TypeScript Resources" title="Direct link to TypeScript Resources">​</a></h2>
<ul>
<li><a href=https://www.typescriptlang.org/docs/handbook/2/basic-types.html target=_blank rel="noopener noreferrer">Basic Types</a></li>
<li><a href=https://basarat.gitbook.io/typescript/getting-started/why-typescript target=_blank rel="noopener noreferrer">Gitbook</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_DxZ9" id=when-to-use-a-user-script-or-a-topic-converter-extension>When to use a user script or a topic converter extension<a href=#when-to-use-a-user-script-or-a-topic-converter-extension class=hash-link aria-label="Direct link to When to use a user script or a topic converter extension" title="Direct link to When to use a user script or a topic converter extension">​</a></h2>
<p>User scripts and <a href=/docs/viz/extensions/introduction#message-converters>topic converter extensions</a> have similar capabilities, but there are key differences in how they are authored, shared, and how they support third-party packages.</p>
<table><thead><tr><th><th>User scripts<th>Topic converters<tbody><tr><td>Data transformation<td>✅<td>✅<tr><td>Create new topics<td>✅<td>✅<tr><td>Edit directly<td>✅<td>❌<tr><td>Scoped to a layout<td>✅<td>❌<tr><td>Reusable across layouts<td>❌<td>✅<tr><td>Shareable with your team<td>❌<td>✅<tr><td>Written in your IDE<td>❌<td>✅<tr><td>Part of your codebase<td>❌<td>✅<tr><td>Use third-party packages<td>❌<td>✅</table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_lYeq"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-10-17T10:36:30.000Z itemprop=dateModified>Oct 17, 2025</time></b> by <b>Qi He</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/viz/panel/raw-messages><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Raw Messages</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/viz/create-moment-viz><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Moments</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IwWT thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#getting-started class="table-of-contents__link toc-highlight">Getting started</a><ul><li><a href=#writing-your-first-script class="table-of-contents__link toc-highlight">Writing your first script</a><li><a href=#using-multiple-input-topics class="table-of-contents__link toc-highlight">Using multiple input topics</a><li><a href=#using-global-variables class="table-of-contents__link toc-highlight">Using global variables</a><li><a href=#debugging class="table-of-contents__link toc-highlight">Debugging</a><li><a href=#skipping-output class="table-of-contents__link toc-highlight">Skipping output</a><li><a href=#using-foxgloveschemas class="table-of-contents__link toc-highlight">Using @foxglove/schemas</a></ul><li><a href=#utilities-and-templates class="table-of-contents__link toc-highlight">Utilities and templates</a><li><a href=#settings class="table-of-contents__link toc-highlight">Settings</a><li><a href=#controls-and-shortcuts class="table-of-contents__link toc-highlight">Controls and shortcuts</a><li><a href=#typescript-resources class="table-of-contents__link toc-highlight">TypeScript Resources</a><li><a href=#when-to-use-a-user-script-or-a-topic-converter-extension class="table-of-contents__link toc-highlight">When to use a user script or a topic converter extension</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Legel</div><ul class="footer__items clean-list"><li class=footer__item><a href=/legal/privacy class=footer__link-item target=_blank>Privacy Policy</a><li class=footer__item><a href=/legal/terms class=footer__link-item target=_blank>Terms of Service</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Data Security</div><ul class="footer__items clean-list"><li class=footer__item><a href=/security/security-white-paper class=footer__link-item target=_blank>coScene Data Security White Paper</a><li class=footer__item><a href=/security/data-security-solution class=footer__link-item target=_blank>coScene Data Security Solution</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/coscene-io target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://www.coscene.io target=_blank rel="noopener noreferrer" class=footer__link-item>Homepage<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_uqr0><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2023 coScene</div></div></div></footer></div>