"use strict";(self.webpackChunk_coscene_io_docs=self.webpackChunk_coscene_io_docs||[]).push([["263"],{69554:function(e,s,n){n.r(s),n.d(s,{frontMatter:()=>i,default:()=>h,toc:()=>l,metadata:()=>t,assets:()=>c,contentTitle:()=>o});var t=JSON.parse('{"id":"viz/extensions/api/custom-panels/subscribe-message-range-args","title":"SubscribeMessageRangeArgs","description":"This type represents the arguments passed to PanelExtensionContext.subscribeMessageRange.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/viz/8-extensions/5-api/3-custom-panels/16-subscribe-message-range-args.md","sourceDirName":"viz/8-extensions/5-api/3-custom-panels","slug":"/viz/extensions/api/custom-panels/subscribe-message-range-args","permalink":"/docs/viz/extensions/api/custom-panels/subscribe-message-range-args","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Qi He","lastUpdatedAt":1755605770000,"sidebarPosition":16,"frontMatter":{"sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"SettingsTreeNodeActionItem","permalink":"/docs/viz/extensions/api/custom-panels/settings-tree-node-action-item"},"next":{"title":"Subscription","permalink":"/docs/viz/extensions/api/custom-panels/subscription"}}'),r=n(96773),a=n(68502);let i={sidebar_position:16},o="SubscribeMessageRangeArgs",c={},l=[{value:"Properties",id:"properties",level:2},{value:"topic",id:"topic",level:3},{value:"convertTo?",id:"convertto",level:3},{value:"preload?",id:"preload",level:3},{value:"start?",id:"start",level:3},{value:"end?",id:"end",level:3},{value:"Functions",id:"functions",level:2},{value:"onNewRangeIterator()",id:"onnewrangeiterator",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"Example",id:"example",level:2},{value:"<del>onReset()?</del>",id:"onreset",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Deprecated",id:"deprecated",level:4}];function d(e){let s={code:"code",del:"del",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"subscribemessagerangeargs",children:"SubscribeMessageRangeArgs"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"type SubscribeMessageRangeArgs = object;\n"})}),"\n",(0,r.jsx)(s.p,{children:"This type represents the arguments passed to PanelExtensionContext.subscribeMessageRange."}),"\n",(0,r.jsx)(s.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(s.h3,{id:"topic",children:"topic"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"topic: string;\n"})}),"\n",(0,r.jsx)(s.p,{children:"The topic to subscribe to."}),"\n",(0,r.jsx)(s.h3,{id:"convertto",children:"convertTo?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"optional convertTo: string;\n"})}),"\n",(0,r.jsx)(s.p,{children:"Convert messages to this schema before passing to the subscriber."}),"\n",(0,r.jsxs)(s.p,{children:["Subscribed MessageEvents will contain the converted message and an ",(0,r.jsx)(s.code,{children:"originalMessageEvent"})," field containing the original message event. If no ",(0,r.jsx)(s.code,{children:"convertTo"})," schema is specified, no message converter will be used. If there is no message converter from the original schema to the ",(0,r.jsx)(s.code,{children:"convertTo"})," schema, no messages will be passed for this subscription."]}),"\n",(0,r.jsx)(s.h3,{id:"preload",children:"preload?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"optional preload: boolean;\n"})}),"\n",(0,r.jsx)(s.p,{children:"If true, data will begin loading immediately, even before the iterator is accessed. Default is false."}),"\n",(0,r.jsx)(s.h3,{id:"start",children:"start?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"optional start: Time;\n"})}),"\n",(0,r.jsx)(s.p,{children:"The start time for the subscription range. If not provided, it will use the beginning of the data source."}),"\n",(0,r.jsx)(s.h3,{id:"end",children:"end?"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"optional end: Time;\n"})}),"\n",(0,r.jsx)(s.p,{children:"The end time for the subscription range. If not provided, it will use the end of the data source."}),"\n",(0,r.jsx)(s.h2,{id:"functions",children:"Functions"}),"\n",(0,r.jsx)(s.h3,{id:"onnewrangeiterator",children:"onNewRangeIterator()"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"onNewRangeIterator: (itemIterator: AsyncIterableIterator&lt;Range&lt;MessageEvent&gt;&gt;) => void;\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"onNewRangeIterator"})," is a function that receives an async iterable when message data is available on the subscription."]}),"\n",(0,r.jsxs)(s.p,{children:["To read messages, your function should iterate through the provided async iterable. Each item from the iterable is a batch of message events for the subscribed topic. These batches and messages are ordered by ",(0,r.jsx)(s.em,{children:"log time"}),". The iterator will end when there are no more messages to read."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"async function onNewRangeIterator(batchIterator) {\n  for await (const batch of batchIterator) {\n    //...\n  }\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"onNewRangeIterator"})," will be called again when upstream topic data changes. For example, when a user script changes for a user script output topic subscription, or when an alias changes for an alias topic subscription. When topic data changes, the previous iterator will end, and its data is no longer valid. When ",(0,r.jsx)(s.code,{children:"onNewRangeIterator"})," is called, you should discard previously received data."]}),"\n",(0,r.jsxs)(s.p,{children:["If your ",(0,r.jsx)(s.code,{children:"onNewRangeIterator"})," function throws an error, the iterator will end, and you will not receive any more messages until ",(0,r.jsx)(s.code,{children:"onNewRangeIterator"})," is called again. Your error will be shown in the problems sidebar for the user to see."]}),"\n",(0,r.jsx)(s.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"itemIterator"}),(0,r.jsx)(s.td,{children:"AsyncIterableIterator<Range<MessageEvent>>"})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"returns",children:"Returns"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"void"})}),"\n",(0,r.jsx)(s.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"function ExampleSubscription(context) {\n  // Subscribe to a specific topic's message range\n  const unsubscribe = context.subscribeMessageRange({\n    topic: '/robot/sensors/imu',\n    start: { sec: 10, nsec: 0 },\n    end: { sec: 20, nsec: 0 },\n    onNewRangeIterator: async (iterator) => {\n      // Process message ranges as they come in\n      for await (const range of iterator) {\n        for (const message of range.items) {\n          console.log('Received message:', message);\n        }\n      }\n    },\n  });\n\n  // Later, you can unsubscribe when done\n  // unsubscribe();\n}\n"})}),"\n",(0,r.jsx)(s.h3,{id:"onreset",children:(0,r.jsx)(s.del,{children:"onReset()?"})}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"optional onReset: (batchIterator) => Promise<void>;\n"})}),"\n",(0,r.jsx)(s.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parameter"}),(0,r.jsx)(s.th,{children:"Type"})]})}),(0,r.jsx)(s.tbody,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"batchIterator"}),(0,r.jsx)(s.td,{children:"AsyncIterable of Array of MessageEvent objects (using Immutable wrapper)"})]})})]}),"\n",(0,r.jsx)(s.h4,{id:"returns-1",children:"Returns"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.code,{children:"Promise<void>"})}),"\n",(0,r.jsx)(s.h4,{id:"deprecated",children:"Deprecated"}),"\n",(0,r.jsxs)(s.p,{children:["This method has been renamed. Use ",(0,r.jsx)(s.code,{children:"onNewRangeIterator"})," instead."]})]})}function h(e={}){let{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},68502:function(e,s,n){n.d(s,{Z:()=>o,a:()=>i});var t=n(41699);let r={},a=t.createContext(r);function i(e){let s=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);