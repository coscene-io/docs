"use strict";(self.webpackChunk_coscene_io_docs=self.webpackChunk_coscene_io_docs||[]).push([["5445"],{85017:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,default:()=>h,frontMatter:()=>a,contentTitle:()=>r,toc:()=>l,assets:()=>s});var o=JSON.parse('{"id":"developers/cocli/cli-action-operations","title":"Managing Actions with CLI Tools","description":"The coScene action system can be used to trigger complex calculations and processing tasks. By scripting with the CLI tool, you can greatly enhance the automation in your workflow. For detailed help on using the CLI to operate actions, refer to","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/developers/cocli/3-cli-action-operations.md","sourceDirName":"developers/cocli","slug":"/developers/cocli/action-operations","permalink":"/docs/developers/cocli/action-operations","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedBy":"Qi He","lastUpdatedAt":1765877105000,"sidebarPosition":3,"frontMatter":{"slug":"action-operations","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Record and File Operations","permalink":"/docs/developers/cocli/record-operations"},"next":{"title":"Examples of Common Batch Operations","permalink":"/docs/developers/cocli/common-batch-tasks"}}'),c=t(25105),i=t(81659);let a={slug:"action-operations",sidebar_position:3},r="Managing Actions with CLI Tools",s={},l=[{value:"Trigger an Action",id:"trigger-an-action",level:2},{value:"View Action Invocation History",id:"view-action-invocation-history",level:3}];function d(e){let n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"managing-actions-with-cli-tools",children:"Managing Actions with CLI Tools"})}),"\n",(0,c.jsx)(n.p,{children:"The coScene action system can be used to trigger complex calculations and processing tasks. By scripting with the CLI tool, you can greatly enhance the automation in your workflow. For detailed help on using the CLI to operate actions, refer to"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cocli action -h\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'Work with coScene action.\n\nUsage:\n  cocli action [command]\n\nAvailable Commands:\n  list        List actions in the current project\n  list-run    List action-runs in the current project\n  run         Create an action run.\n\nFlags:\n  -h, --help   help for action\n\nGlobal Flags:\n      --config string      config file path (default "/Users/yujing/.cocli.yaml")\n      --log-level string   log level, one of: trace|debug|info|warn|error (default "info")\n\nUse "cocli action [command] --help" for more information about a command.\n'})}),"\n",(0,c.jsx)(n.h1,{id:"list-actions-in-the-current-project",children:"List Actions in the Current Project"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cocli action list\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"ID                                       CATEGORY    TITLE                              AUTHOR                   UPDATE TIME\n5110ab15-9cc9-452b-b9d6-46be3adc7ef4     system      analysis-export                                             1970-01-01T08:00:00+08:00\nc2a0f23a-0384-4de3-bed6-ee27e457c714     system      copy-record                                                 1970-01-01T08:00:00+08:00\n7a605493-628e-4348-9c3d-446cc6cbfcb1     system      create-task                                                 1970-01-01T08:00:00+08:00\nbf9b33a3-1f00-44a8-afb8-a9920b9b66e6     system      csv-mcap-converter                                          1970-01-01T08:00:00+08:00\na142623d-b7f9-4989-a8fe-7d12e9f66694     system      curve-comparison                                            1970-01-01T08:00:00+08:00\n5ecf5286-cb74-470f-a172-6cc8f346191f     system      decompress-file                                             1970-01-01T08:00:00+08:00\n73c5d00c-7c3d-41b9-b3d2-31d7b54df94e     system      event-creator                                               1970-01-01T08:00:00+08:00\na903fb83-f028-4bef-ab5a-c6a1c7df9a69     system      extraction                                                  1970-01-01T08:00:00+08:00\ne99fecdb-74c5-41f9-8061-841d054d52a8     system      hdf5-mcap-converter                                         1970-01-01T08:00:00+08:00\n7b48486a-b94d-4558-ac79-8c2b91ab0f50     system      mcap-hdf5-converter                                         1970-01-01T08:00:00+08:00\nd8fcf7dd-b7f7-4c5d-ae4a-c45ba0321c89     system      parse-pcap-and-upload                                       1970-01-01T08:00:00+08:00\n06105ba0-3a69-4fc4-9bf4-8795b423e8fe     system      record-auto-diagnosis                                       1970-01-01T08:00:00+08:00\n68813bbe-d4e4-478d-acce-49f790e9cea7     system      record-clipper                                              1970-01-01T08:00:00+08:00\nf9ceb8c8-63c3-4b37-a057-e9f70755e354     system      remote-file-for-record                                      1970-01-01T08:00:00+08:00\nfb1bb37a-7b27-11ee-b962-0242ac120002     system      ros2-mcap-converter                                         1970-01-01T08:00:00+08:00\n6cdf7cf9-d635-4cad-9333-cb58fc6a8e24     system      yw-cyber-converter                                          1970-01-01T08:00:00+08:00\n"})}),"\n",(0,c.jsx)(n.h2,{id:"trigger-an-action",children:"Trigger an Action"}),"\n",(0,c.jsx)(n.p,{children:"After finding the action we want to execute, we can directly trigger it from the command line to achieve full automation."}),"\n",(0,c.jsx)(n.p,{children:"Here, we have prepared an action that will list the files in the current directory and output the result."}),"\n",(0,c.jsx)(n.p,{children:"Actions require data from records to run. We first find the required action ID and record ID, and then use these IDs to trigger the action."}),"\n",(0,c.jsx)(n.admonition,{title:"Recommend Using JSON Output",type:"tip",children:(0,c.jsxs)(n.p,{children:["Using JSON output with the ",(0,c.jsx)(n.code,{children:"jq"})," tool to extract IDs is more reliable and stable."]})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Use JSON output to get record and action, e.g., to run the coScene-test action on the first record\nRECORD_NAME=$(cocli record list -o json | jq -r '.records[0].name')\nACTION_NAME=$(cocli action list -o json | jq -r '.actions[] | select(.spec.name | contains(\"coScene-test\")) | .name')\ncocli action run $ACTION_NAME $RECORD_NAME\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"The final parameters in the action run to be created:\nAction run created successfully.\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Executing an action is a resource-intensive operation. Without the ",(0,c.jsx)(n.code,{children:"-f"})," flag, you need to manually confirm the execution. If you do not need manual confirmation for the current operation, you can use the ",(0,c.jsx)(n.code,{children:"-f"})," flag to skip it. This is very useful when processing large amounts of data in bulk."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cocli action run $ACTION_NAME $RECORD_NAME -f\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"The final parameters in the action run to be created:\nAction run created successfully.\n"})}),"\n",(0,c.jsxs)(n.p,{children:["More complex actions may require additional parameters for customization. You can provide these parameters using the ",(0,c.jsx)(n.code,{children:"-p"})," flag."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cocli action run $ACTION_NAME $RECORD_NAME -f -p parameter1=123 -p parameter2=456\n"})}),"\n",(0,c.jsxs)(n.p,{children:["Please note that in this calling mode, if there are parameters other than ",(0,c.jsx)(n.code,{children:"parameter1"})," and ",(0,c.jsx)(n.code,{children:"parameter2"}),", the remaining parameters will use the default values defined in the action if not explicitly provided."]}),"\n",(0,c.jsx)(n.h3,{id:"view-action-invocation-history",children:"View Action Invocation History"}),"\n",(0,c.jsx)(n.p,{children:"After successfully triggering an action, you can view the invocation history to see the actions you have triggered."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cocli action list-run\n"})}),"\n",(0,c.jsx)(n.p,{children:"For more detailed information or for script processing, you can use JSON format output:"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"cocli action list-run -o json\n"})})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},81659:function(e,n,t){t.d(n,{R:()=>a,x:()=>r});var o=t(58101);let c={},i=o.createContext(c);function a(e){let n=o.useContext(i);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);